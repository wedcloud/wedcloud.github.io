---
title: spring-aop
tags: [spring]
categories:
  - spring
  - aop
date: 2020-04-16 16:21:49
---

## AOP

Spring AOP 底层 -- 代理模式

### 代理模式

#### 静态代理

角色分析：

* 抽象角色：一般使用接口或者抽象类来解决
* 真实角色：被代理的角色
* 代理角色：代理真实角色，代理真实角色之后，通常还会做一些附属操作（公共的业务）

静态代理模式的好处：

- 使真实角色的操作更加纯粹
- 公共业务交给代理角色，实现业务分工
- 公共业务发生扩展的时候，方便集中管理

缺点：

* 一个真实角色就会产生一个代理角色，代码量大，开发效率低

#### 动态代理

* 动态代理和静态代理角色一样
* 动态代理的代理类是动态生成的，不是我们直接写好的
* 动态代理分为两大类：基于接口的动态代理，基于类动态代理
  - 基于接口的：JDK动态代理【常用】
  - 基于类： cglib
  - Java字节码实现：Javasist

好处：

- 使真实角色的操作更加纯粹
- 公共业务交给代理角色，实现业务分工
- 公共业务发生扩展的时候，方便集中管理
- 一个动态代理类，代理的是一个接口，一般每一个接口对应的就是一类业务
- 一个动态代理类，可以代理多个类，只要实现统一接口即可



