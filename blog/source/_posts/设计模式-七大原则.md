---
title: 设计模式-七大原则
tags: [设计模式]
categories:
  - 设计模式
  - 七大原则
date: 2020-05-20 14:16:50
---

# 七大原则

设计模式的目的：

> 提高程序的可扩展性、可维护性、可重用性、可读性，可靠性，是程序呈现高内聚，低耦合的特性

## 单一职责原则(SRP：Single responsibility principle)

类的职责要单一，不能将太多的职责放在一个类中

* 降低类的复杂度
* 提高类的可读性，可维护性
* 降低代码变更引起的风险
* 通常情况下，应当**遵循单一职责原则**
  * 只有在逻辑足够简单时，才可以违反单一职责原则
  * 只有类中的方法足够少时，才能在方法级别上保持单一职责原则

## 接口隔离原则(ISP ：Interface Segregation Principle)

* 客户端不应该依赖它不需要的接口
* 一个类对另一个类的依赖应该建立在最小的接口上

### 优点

* 不要建立庞大臃肿的接口，尽量细化接口，接口中的方法尽量少
* 接口是设计时对外部设定的“契约”，通过分散定义多个接口，可以预防外来变更的扩散，提高系统的灵活性和可维护性

### 注意点

* 接口尽量小，但是要有限度。对接口进行细化可以提高程序设计灵活性是不争的事实，但是如果过小，则会造成接口数量过多，使设计复杂化。所以一定要适度
* 为依赖接口的类定制服务，只暴露给调用的类它需要的方法，它不需要的方法则隐藏起来。只有专注地为一个模块提供定制服务，才能建立最小的依赖关系
* 提高内聚，减少对外交互。使接口用最少的方法去完成最多的事情
* 运用接口隔离原则，一定要适度，接口设计的过大或过小都不好。设计接口的时候，只有多花些时间去思考和筹划，才能准确地实践这一原则

### 思考

你是否觉得ISP跟之前的单一职责原则很相似？

1. 单一职责原则原注重的是职责；而接口隔离原则注重对接口依赖的隔离
2. 单一职责原则主要是约束类，其次才是`接口和方法`，它针对的是程序中的实现和细节；而接口隔离原则主要`约束接口`，主要针对抽象，针对程序整体框架的构建

## 依赖倒转原则(DIP ：Dependence Inversion Principle)

要针对抽象层编程，而不要针对具体类编程，即面向接口编程

* 高层模块不应该依赖低层模块，二者都应该依赖其抽象
* 抽象不应该依赖细节
* 细节应该依赖抽象

### 设计理念

细节是多变的，相对而言抽象就要稳定的多。

所以以抽象为基础搭建的架构比以细节为基础的架构要稳定的多



使用接口或抽象类的目的是制定好规范，而不涉及任何操作；

展现细节的任务交给它们的实现类去完成。



## 里氏替换原则(LSP : Liskov Substitution Principle)

在软件系统中，一个可以接受基类对象的地方必然可以接受一个子类对象，即子类可以完全替代父类，并且不改变原程序的结果

* 引用基类的地方必须能透明的使用其子类的对象
* **子类尽量不要重写父类的非抽象方法**
* 继承实际上让两个类的耦合性增加了，所以在适当的情况下可以通过使父类和子类继承一个更广泛的基类，并采用聚合、组合、依赖来解决问题

注意：

1. `如果子类不能完整地实现父类的方法，或者父类的一些方法在子类中已经发生畸变，则建议断开继承关系，采用依赖，聚集，组合等关系代替继承`
2. `子类可以有自己的行为和外观，也就是方法和属性。但是里氏替换原则可以正着用，但是不能反着用。在子类出现的地方，父类未必就可以胜任`

## 开闭原则(OCP ： Open Closed Principle) `核心`

软件实体对扩展是开放的，但对修改是关闭的，即在不修改一个软件实体的基础上去扩展其功能



## 迪米特法原则(LOD : Law of Demeter)

**也叫作最少知识原则(LKP : Least Knowledge Principle)**

一个软件实体对其他实体的引用越少越好，或者说如果两个类不必彼此直接通信，那么这两个类就不应当发生直接的相互作用，而是通过引入一个第三者（直接朋友）发生间接交互

* 一个对象应该对其他的对象保持最少的了解
* 类的关系越密切，耦合度越大

作用：降低类与类之间的耦合

简单定义： 只与直接朋友通讯

直接朋友：出现在成员变量、方法参数、方法返回值中的类

陌生类：出现在局部变量中的类

## 合成复用原则(CRP : **Composite Reuse Principle**)

在系统中应该尽量多使用组合和聚合关联关系，尽量少使用甚至不使用继承关系